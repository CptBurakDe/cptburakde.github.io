<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LGHP4 Quiz 1</title>
<link rel="stylesheet" href="../../css/quiz.css">
</head>
<body>
<h1>LGHP4 Liquefied Gas Handling Procedures Quiz 1</h1>

<h3 id="timer">Time Left: 60 seconds</h3> 

<h2 id="score">Score: 0 / 12</h2> 
<div class="quiz-container" id="quiz">
</div>

<div id="results" class="quiz-container" style="display: none; text-align: center;">
Â  Â  <h2 id="results-title">Congratulations! Quiz Completed! ðŸŽ‰</h2>
Â  Â  <p id="final-message" style="font-size: 1.2em; font-weight: bold; margin-bottom: 20px;"></p>
Â  Â  
Â  Â  <h3>Share Your Result:</h3>
Â  Â  <div id="share-links" style="margin-top: 20px;">
Â  Â  Â  Â  <button id="generic-share-btn" style="padding: 10px 20px; margin: 5px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
Â  Â  Â  Â  Â  Â  Share My Result
Â  Â  Â  Â  </button>
Â  Â  Â  Â  
Â  Â  Â  Â  <a id="linkedin-share-link" target="_blank" style="padding: 10px 20px; margin: 5px; background-color: #0077B5; color: white; text-decoration: none; border-radius: 5px; display: inline-block;">
Â  Â  Â  Â  Â  Â  Share on LinkedIn ðŸ’¼
Â  Â  Â  Â  </a>

Â  Â  Â  Â  <button id="try-again-btn" style="padding: 10px 20px; margin: 5px; background-color: #ff6347; color: white; border: none; border-radius: 5px; cursor: pointer;">
Â  Â  Â  Â  Â  Â  Try Again ðŸ”„
Â  Â  Â  Â  </button>
Â  Â  </div>
</div>
<script>
const quizData = [
Â  Â  {
Â  Â  Â  Â  question: "Which statement correctly describes a membrane tank?",
Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  "A self-supporting tank with thick walls capable of holding pressure independently.",
Â  Â  Â  Â  Â  Â  "A fully pressurized cargo tank used only on SR ships.",
Â  Â  Â  Â  Â  Â  "A tank that uses pressurized gas to maintain its structural integrity.",
Â  Â  Â  Â  Â  Â  "A non-self-supporting tank with a thin primary barrier supported by insulation and the hull structure." 
Â  Â  Â  Â  ],
Â  Â  Â  Â  answer: 3
Â  Â  },
Â  Â  {
Â  Â  Â  Â  question: "The popping pressure of a safety valve is best defined as:",
Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  "The pressure at which the disk moves faster than at higher or lower pressures.", 
Â  Â  Â  Â  Â  Â  "The pressure at which the valve permanently fails.",
Â  Â  Â  Â  Â  Â  "The maximum pressure the vessel can tolerate before rupture.",
Â  Â  Â  Â  Â  Â  "The pressure required to manually open the valve."
Â  Â  Â  Â  ],
Â  Â  Â  Â  answer: 0
Â  Â  },
Â  Â  {
Â  Â  Â  Â  question: "Which of the following statements about PRVs (Pressure Relief Valves) is correct?",
Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  "PRVs can only be manually operated.",
Â  Â  Â  Â  Â  Â  "PRVs are not used in LNG carriers.",
Â  Â  Â  Â  Â  Â  "PRVs allow process fluid to flow automatically under excessive upstream pressure until normal conditions are restored.", 
Â  Â  Â  Â  Â  Â  "PRVs are designed only for vacuum conditions."
Â  Â  Â  Â  ],
Â  Â  Â  Â  answer: 2
Â  Â  },
Â  Â  {
Â  Â  Â  Â  question: "In LNG shipping, what is the primary function of reliquefaction?",
Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  "To maintain tank structural integrity.",
Â  Â  Â  Â  Â  Â  "To convert boil-off gas back into liquid.", 
Â  Â  Â  Â  Â  Â  "To vaporize the cargo for immediate discharge.",
Â  Â  Â  Â  Â  Â  "To heat the cargo for easier pumping."
Â  Â  Â  Â  ],
Â  Â  Â  Â  answer: 1
Â  Â  },
Â  Â  {
Â  Â  Â  Â  question: "A Reverse Brayton Cycle is primarily used for:",
Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  "Generating mechanical work in gas turbines.",
Â  Â  Â  Â  Â  Â  "Compressing LNG for storage in fully pressurized tanks.",
Â  Â  Â  Â  Â  Â  "Removing heat from a system to produce a cooling effect.", 
Â  Â  Â  Â  Â  Â  "Increasing the pressure in semi-refrigerated cargo tanks."
Â  Â  Â  Â  ],
Â  Â  Â  Â  answer: 2
Â  Â  },
Â  Â  {
Â  Â  Â  Â  question: "Which of the following best describes a Regasification Vessel (RV)?",
Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  "A ship capable of converting LNG back into gas using onboard vaporisers.", 
Â  Â  Â  Â  Â  Â  "A standard LNG carrier without onboard vaporisers.",
Â  Â  Â  Â  Â  Â  "A vessel that carries pressurized nitrogen.",
Â  Â  Â  Â  Â  Â  "A tanker designed exclusively for crude oil."
Â  Â  Â  Â  ],
Â  Â  Â  Â  answer: 0
Â  Â  },
Â  Â  {
Â  Â  Â  Â  question: "What is the key difference between SR (Semi-Refrigerated) ships and fully pressurized gas carriers?",
Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  "SR ships cannot discharge to pressurized facilities.",
Â  Â  Â  Â  Â  Â  "SR ships use lower design pressure tanks (5â€“7 bar) and rely on a reliquefaction plant.", 
Â  Â  Â  Â  Â  Â  "SR ships do not carry boil-off gas.",
Â  Â  Â  Â  Â  Â  "SR ships operate only at ambient temperature."
Â  Â  Â  Â  ],
Â  Â  Â  Â  answer: 1
Â  Â  },
Â  Â  {
Â  Â  Â  Â  question: "Quick Connect/Disconnect Couplings (QC/DC) are used primarily for:",
Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  "Connecting LNG pipelines onshore.",
Â  Â  Â  Â  Â  Â  "Allowing rapid hydraulic connection of MLAs to the shipâ€™s manifold flange.", 
Â  Â  Â  Â  Â  Â  "Sealing fully pressurized tanks.",
Â  Â  Â  Â  Â  Â  "Monitoring tank pressure remotely."
Â  Â  Â  Â  ],
Â  Â  Â  Â  answer: 1
Â  Â  },
Â  Â  {
Â  Â  Â  Â  question: "The STL (Submerged Turret Loading) system is designed to:",
Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  "Load or unload oil or liquefied gas from a tanker through a buoy moored to the seabed.", 
Â  Â  Â  Â  Â  Â  "Vaporize LNG for discharge.",
Â  Â  Â  Â  Â  Â  "Generate electricity onboard LNG carriers.",
Â  Â  Â  Â  Â  Â  "Pressurize cargo tanks to prevent boil-off."
Â  Â  Â  Â  ],
Â  Â  Â  Â  answer: 0
Â  Â  },
Â  Â  {
Â  Â  Â  Â  question: "At STP (Standard Temperature and Pressure), which conditions are correct?",
Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  "273 K and 2 atm",
Â  Â  Â  Â  Â  Â  "25Â°C and 1 atm",
Â  Â  Â  Â  Â  Â  "0Â°C and 1 atm (100,000 Pa)", 
Â  Â  Â  Â  Â  Â  "0Â°C and 5 bar"
Â  Â  Â  Â  ],
Â  Â  Â  Â  answer: 2
Â  Â  },
Â  Â  {
Â  Â  Â  Â  question: "SVP (Saturated Vapour Pressure) refers to:",
Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  "The pressure inside a semi-refrigerated tank.",
Â  Â  Â  Â  Â  Â  "The pressure exerted by a vapor in equilibrium with its condensed phase at a given temperature.", 
Â  Â  Â  Â  Â  Â  "The relief valve opening pressure.",
Â  Â  Â  Â  Â  Â  "The maximum pressure a pressurized tank can withstand."
Â  Â  Â  Â  ],
Â  Â  Â  Â  answer: 1
Â  Â  },
Â  Â  {
Â  Â  Â  Â  question: "Which of the following best describes the purpose of the Reverse Brayton Cycle in LNG carriers?",
Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  "To convert LNG boil-off gas into mechanical work.",
Â  Â  Â  Â  Â  Â  "To vaporize LNG before transfer to shore pipelines.",
Â  Â  Â  Â  Â  Â  "To use compressed and expanded air to remove heat, providing onboard cooling.", 
Â  Â  Â  Â  Â  Â  "To pressurize cargo tanks before loading."
Â  Â  Â  Â  ],
Â  Â  Â  Â  answer: 2
Â  Â  }
];

const quizContainer = document.getElementById('quiz');
const scoreElement = document.getElementById('score');
const resultsContainer = document.getElementById('results');
const finalMessage = document.getElementById('final-message');
const genericShareBtn = document.getElementById('generic-share-btn');
const linkedinShareLink = document.getElementById('linkedin-share-link');
const timerElement = document.getElementById('timer'); 
const tryAgainBtn = document.getElementById('try-again-btn'); 

let correctAnswers = 0;
let answeredQuestions = 0;
const totalQuestions = quizData.length;
let currentQuestionIndex = 0;
let timerInterval;
const TIME_PER_QUESTION = 60; // Set back to 60 seconds

// --- TIMER FUNCTIONS ---
function startTimer() {
Â  Â  let timeLeft = TIME_PER_QUESTION;
    // Set initial text
Â  Â  timerElement.textContent = `Time Left: ${timeLeft} seconds`;
Â  Â  
Â  Â  clearInterval(timerInterval);

Â  Â  timerInterval = setInterval(() => {
Â  Â  Â  Â  timeLeft--;
Â  Â  Â  Â  timerElement.textContent = `Time Left: ${timeLeft} seconds`;

Â  Â  Â  Â  if (timeLeft <= 0) {
Â  Â  Â  Â  Â  Â  clearInterval(timerInterval);
Â  Â  Â  Â  Â  Â  timerElement.textContent = "Time's Up!";
Â  Â  Â  Â  Â  Â  handleTimeout();
Â  Â  Â  Â  }
Â  Â  }, 1000);
}

function stopTimer() {
Â  Â  clearInterval(timerInterval);
}

function handleTimeout() {
    // Disable buttons for the current question
Â  Â  const currentQuestionDiv = quizContainer.children[currentQuestionIndex];
Â  Â  if (currentQuestionDiv) {
Â  Â  Â  Â  const optionsDiv = currentQuestionDiv.querySelector('.options');
Â  Â  Â  Â  if (optionsDiv) {
Â  Â  Â  Â  Â  Â  Array.from(optionsDiv.children).forEach(b => b.disabled = true);
            
            // Highlight the correct answer since time ran out
            Array.from(optionsDiv.children).forEach((b, idx) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (idx === quizData[currentQuestionIndex].answer) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.classList.add('correct');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  }
    
Â  Â  answeredQuestions++;
Â  Â  currentQuestionIndex++;
Â  Â  updateScore(); 
Â  Â  
Â  Â  if (currentQuestionIndex < totalQuestions) {
        // Move to the next question after a brief delay
        setTimeout(() => {
            showQuestion(currentQuestionIndex);
        }, 1500); 
Â  Â  } else {
Â  Â  Â  Â  showResults();
Â  Â  }
}

// --- QUESTION DISPLAY AND NAVIGATION ---
function showQuestion(index) {
Â  Â  Array.from(quizContainer.children).forEach((div, i) => {
Â  Â  Â  Â  div.style.display = i === index ? 'block' : 'none';
Â  Â  });
Â  Â  startTimer();
}

// --- SCORE AND RESULTS FUNCTIONS ---
function updateScore() {
Â  Â  scoreElement.textContent = `Score: ${correctAnswers} / ${totalQuestions}`;
Â  Â  if (answeredQuestions === totalQuestions) {
Â  Â  Â  Â  stopTimer();
Â  Â  Â  Â  showResults();
Â  Â  }
}

function showResults() {
    stopTimer();
    quizContainer.style.display = 'none';
    resultsContainer.style.display = 'block';
    timerElement.style.display = 'none';

    const percentage = Math.round((correctAnswers / totalQuestions) * 100);
    let messageText;

    if (percentage === 100) {
        messageText = `Perfect! You answered all ${correctAnswers} questions correctly! ðŸš¢âš“`;
    } else if (percentage >= 70) {
        messageText = `Congratulations! You have a strong knowledge base with ${correctAnswers} / ${totalQuestions} (${percentage}%) correct answers.`;
    } else {
        messageText = `A good start! You scored ${correctAnswers} / ${totalQuestions} (${percentage}%). You might want to review the LGHP4 notes.`;
    }

    finalMessage.textContent = messageText;

    const shareText = `I scored ${correctAnswers}/${totalQuestions} (${percentage}%) on the LGHP Advanced Quiz! Tested my LNG / LGC knowledge. #LGHP4 #LNG #Maritime`;
    const shareUrl = window.location.href;

    // LinkedIn
    linkedinShareLink.href = `https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(shareUrl)}&title=${encodeURIComponent('LGHP Advanced Quiz Result')}&summary=${encodeURIComponent(shareText)}`;
    linkedinShareLink.target = "_blank";
    linkedinShareLink.rel = "noopener noreferrer";

    // Generic Share (Web Share API + fallback)
    // Ã–nceki listener varsa temizle
    const newBtn = genericShareBtn.cloneNode(true);
    genericShareBtn.parentNode.replaceChild(newBtn, genericShareBtn);

    newBtn.addEventListener('click', () => {
        if (navigator.share) {
            navigator.share({
                title: 'LGHP Advanced Quiz Result',
                text: shareText,
                url: shareUrl,
            }).catch(console.error);
        } else {
            const fallbackText = `${shareText} ${shareUrl}`;
            navigator.clipboard.writeText(fallbackText).then(() => {
                alert("Your result has been copied to the clipboard! You can paste and share it anywhere.");
            }).catch(() => {
                // Fallback: Twitter
                const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
                window.open(twitterUrl, '_blank');
            });
        }
    });
}



// --- INITIALIZATION AND LOOP ---

// Quiz question element creation
quizData.forEach((q, index) => {
Â  Â  const questionDiv = document.createElement('div');
Â  Â  questionDiv.className = 'question';
Â  Â  questionDiv.style.display = index === 0 ? 'block' : 'none'; 

Â  Â  const questionTitle = document.createElement('h3');
Â  Â  questionTitle.textContent = `${index + 1}. ${q.question}`;
Â  Â  questionDiv.appendChild(questionTitle);

Â  Â  const optionsDiv = document.createElement('div');
Â  Â  optionsDiv.className = 'options';

Â  Â  q.options.forEach((opt, i) => {
Â  Â  Â  Â  const btn = document.createElement('button');
Â  Â  Â  Â  btn.textContent = opt;
Â  Â  Â  Â  
Â  Â  Â  Â  btn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  stopTimer(); 
Â  Â  Â  Â  Â  Â  answeredQuestions++;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Highlight answers and disable buttons
Â  Â  Â  Â  Â  Â  Array.from(optionsDiv.children).forEach(b => b.disabled = true);
Â  Â  Â  Â  Â  Â  Array.from(optionsDiv.children).forEach((b, idx) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (idx === q.answer) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.classList.add('correct');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (i === q.answer) {
Â  Â  Â  Â  Â  Â  Â  Â  correctAnswers++;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  btn.classList.add('incorrect');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Move to the next question after a brief delay
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  currentQuestionIndex++;
Â  Â  Â  Â  Â  Â  Â  Â  updateScore(); 
Â  Â  Â  Â  Â  Â  Â  Â  if (currentQuestionIndex < totalQuestions) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showQuestion(currentQuestionIndex);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }, 1500); 
Â  Â  Â  Â  });
Â  Â  Â  Â  optionsDiv.appendChild(btn);
Â  Â  });

Â  Â  questionDiv.appendChild(optionsDiv); 
Â  Â  quizContainer.appendChild(questionDiv);
});

// Try Again button functionality
tryAgainBtn.addEventListener('click', () => {
Â  Â  window.location.reload();
});


// Start the quiz
updateScore();
showQuestion(currentQuestionIndex);
</script>

</body>
</html>